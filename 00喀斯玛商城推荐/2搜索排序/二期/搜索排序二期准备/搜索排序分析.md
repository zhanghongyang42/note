# 商城业务-用户

购买来源，多少来自搜索。
给根据行为给用户分类，典型用户典型特征典型指标。

标签复购偏好，
关键字复购，
复购与订单，点击，搜索统计次数比。

时间编码



线下合同 获取用户。

除了商城主系统，还有，同步用户，订单，结算单。



只注册用户，属于沉睡用户，暂时不解决。

注册有行为用户，不发生购买，暂时不解决。

有一次购买行为的用户，暂时不解决。



订单来源：

有多次购买行为的用户，通过补单下单，暂时没问题。

有多次购买行为的用户，通过其他商城下单，暂时没问题。

有多次购买行为的用户，通过求购下单，暂时没问题。

有多次购买行为的用户，通过线下下单，暂时没问题。

有多次购买行为的用户，通过招投标下单，暂时没问题。

有多次购买行为的用户，通过购买历史下单，暂时没问题。

有多次购买行为的用户，通过搜索下单，但在下单过程中多次搜索、筛选、翻页、排序，通过搜索排序解决。



# 搜索现状

### 搜索频率

以2022年3月为例：

平均每日搜索次数 7千 - 3万4千次。

平均每日搜索人数 1300 - 5千次。

且在增加当中。现在高峰可达平均一秒3次。



### 搜索路径

**首页搜索**包括**商品**和**商家**的 **模糊搜索**和**精确搜索**。商品搜索可以依靠 名称，货号，品牌 等作为关键字进行搜索。商家可以靠商家名称，店铺名称等进行搜索。



搜索结果 可以进行翻页、筛选、排序。



搜索排序模块目前只 在 商品搜索的默认排序中起作用。



# 搜索理想架构

理想中的搜索架构包括以下部分：

搜索词处理、搜索召回、搜索排序、规则干预。



# 搜索中的问题

### 工程业务问题

1、同一商家商品多规格霸屏。

2、促销价格没有参与按价格排序



### 搜索词处理

1、货号包含搜索词的非相关商品。

​		解决：货号拆词规则优化，前后有数字的不拆词，“字母空格-*/”可拆

2、名称包含搜索词的非相关商品（硫酸与硫酸铜等）

3、没有返回搜索结果（搜索词过长、确实没有对应商品）



### 搜索召回

1、搜索词带品牌/商家：商品实际品牌和搜索词中的品牌不一致（大龙移液器）

2、完全匹配的商品匹配度略高（ES可解决）



### 规则干预

1、付费商家和商品强制排在最前。



### 搜索排序

1、搜索列表页基本都需要二次筛选（商家/品牌...）

2、更换搜索词重新搜索

3、历史购买、历史行为商品没排在前面

4、丢失了es按关键词匹配排序的信息



# 搜索排序目标

1、历史购买/历史行为排在前面

2、减少用户筛选次数

3、提升用户点击位置



# 搜索排序特征

详见excel



复购时间编码



3、排序一期重要特征15个

```
search_7d_count_member	
orders_30d_count_product	
cart_7d_count_product
product_price
login_last_date_member
member_product_6month_click_count	
member_product_month_click_count	
orders_last_date_product	
orders_30d_amount_product	
member_area_id	
supplier_settle_type	
orders_30d_days_member	
member_product_6month_order_count	
member_product_3month_order_count	
member_product_month_order_count	
```





















