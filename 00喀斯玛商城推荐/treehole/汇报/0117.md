# 时间节点

| 步骤               | 人员                 | 时间      |
| ------------------ | -------------------- | --------- |
| 集群搭建           | 郑照辉               | 5人天     |
| 埋点和业务数据导入 | 张红阳、魏波涛       | 8人天     |
| 数据加工           | 张红阳、魏波涛       | 10人天    |
| 特征工程           | 张红阳               | 15人天    |
| **模型训练**       | 张红阳               | 10人天    |
| hive同步到MySQL    | 张红阳、魏波涛       | 3人天     |
| web服务搭建        | 魏波涛               | 10人天    |
| 与现有搜索引擎整合 | 陈赟                 | 5人天     |
| 测试               | 测试组（性能，错误） | 2人天     |
| 模型评价           | 神策数据             | --        |
| 合计人天           | --                   | 68-78人天 |



**里程碑时间**

数仓完成：耗时3周，1月20号开始，预计2月20号完成。

模型完成：耗时5周，2月21号开始，预计3月25号完成。

上线完成：耗时4周，可并行一周，3月21号开始，预计4月15号完成。



**风险点**：

大约48人天，模型训练完成后，可以通过模型离线评价得出初步的模型预测效果。可能因为数据质量问题达不到预期，需要找出新的特征或者做一些新数据，如：会员研究方向，需要产品业务配合，寻找新的特征。

所以前期考虑用3个月左右的时间，快速尝试。



# 集群配置

| 集群        | 3个月 | 1年    |
| ----------- | ----- | ------ |
| 低配CDH集群 | 20448 | 69950  |
| 高配CDH集群 | 34116 | 116421 |

低配集群：

数仓 新服务器01：内存32G，硬盘2T，16核  23358.00
数仓 新服务器02：内存16G，硬盘2T，8核  15320.40
数仓 新服务器03：内存16G，硬盘2T，8核 15320.40
实时服务 新服务器04：内存16G，硬盘500G，4核 7976.40
离线训练 新服务器05：内存16G，硬盘500G，4核 7976.40



高配集群：

数仓 新服务器01：内存64G，硬盘2T，16核  30620.40
数仓 新服务器02：内存32G，硬盘2T，16核  23358.00
数仓 新服务器03：内存32G，硬盘2T，16核 23358.00
实时服务 新服务器04：内存16G，硬盘500G，4核 7976.40
离线训练 新服务器05：内存16G，硬盘500G，4核 7976.40
数据库 新服务器06：内存16G，硬盘900G，8核 23133.60

# 目前现状

通过query搜索词，通过同义词转换+人工排序规则干预 ，从ES中搜索出2000条数据，根据神策埋点，过去6个月从搜索返回结果到下单的转化率约13.2%。



# 模型效果

1. 考虑到搜索用户本身就有强烈的购买意愿，我们对搜索结果进行排序，对GMV的提升效果应该是有限的，略有提升。
2. 用`搜索结果到下单的转化率`和`点击位置均值`对我们搜索排序项目进行评价，转化率现在为**13.2%**，预计转化率约提升到**20%**，位置均值现在是4.3，可以作为一个参考标准从另一维度评价我们的模型效果。通过搜索排序，大幅优化用户的搜索体验。
3. 并可以在之后，持续的进行优化。搭建的大数据集群不仅仅支持搜索排序，对后续数据分析，决策支持和智能推荐也能复用该集群体系。
4. 我们还可以通过在此次项目中根据机器学习算法反找出重要特征，反过来反哺人工排序条件。



# 评价指标

1.离线评价指标可以用AUC评价模型质量，召回率和准确率评价预测结果。

2.所有被点击的商品 位置均值是4.3（没有点击的不计算）。



3.转化率指标统计的都是从从去年7月至22年1月的转化率。

|                |            | 搜索结果到商品点击的转化率 | 商品详情到商品购买的转化率 | 搜索结果到购买的转化率 | 转化时间的中位数 |
| -------------- | ---------- | -------------------------- | -------------------------- | ---------------------- | ---------------- |
| 所有用户       | 按人数统计 | 55.2%                      | 23.39%                     | 13.2%                  | 6分39秒          |
|                | 按次数统计 | 26.17%                     | 11.84%                     | 3.1%                   |                  |
| 登录状态下用户 | 按人数统计 | 74.1%                      | 40.69%                     | 30.14%                 | 5分52秒          |
|                | 按次数统计 | 26.17%                     | 11.58%                     | 3.4%                   |                  |

从现有数据可以看出来，登录状态下的用户的 按人数统计的各种转化率更高，这是非常自然的。但是按次数统计的转化率相差不大，说明登录之后，用户购买的意愿更强烈，但是无论是否登录，用户的搜索得到满意结果的次数是基本一样的。

还可以看出，按次数统计的转化率明显低于按人数统计的转化率，这说明搜索的用户有强烈的购买意愿，大部分最后都发生了购买行为，但是搜索次数非常多，搜索的体验较差。



4.结论

我们的搜索排序更倾向于给有强烈购买意愿的用户提供更优化的搜索体验，减少他们的搜索次数，而对提高用户购买意愿方面提升有限。主要效果体现在提升用户搜索的体验，而对GMV提升有限。

所以选用 登录状态下，按次数统计，从搜索结果到商品点击的转化率   和 搜索结果到购买的转化率 作为主要评价指标，其他指标作为参考。

搜索结果到商品点击的转化率目前为26.17%，预计提升到30%以上。

搜索结果到购买的转化率目前为3.4%，预计提升到6%以上。







































































































































