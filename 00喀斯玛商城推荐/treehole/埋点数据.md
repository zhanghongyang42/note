# 埋点数据

两种方案：

一是完全自己做埋点，前端埋点，在服务器上生成日志文件。通过flume导入到hive。

1. 数据可控。
2. 工作量同二相比，前期会多。
3. 前端需要维护两套方案。



二是和神策结合，神策已有埋点能复用的就复用，不能的还是需要前端埋点，神策数据也需要我们JDBC查询，然后处理数据，通过hadoop或者spark导入hive。

1. 埋点数据以后数据量可能会大，会神策数据库是个压力，对我们也是个风险。
2. 要和外部数据有 IO。
3. 有和神策的沟通成本。



比较倾向于第一种埋点方案。

埋点信息发送方式，离开页面统一发送，格式json即可。发送到3台服务器上



### 用户商品交互位置

点击：跳进商品详情页即算点击。

收藏：详情页收藏。？

加购：详情页加入购物车。？

购买：购买成功页，即购买。？



为什么不用浏览：

1.浏览定义为页面中心位置曝光5秒，可浏览页面多。浏览事件会对前端造成较大压力。

2.我们网站的客户主要通过搜索产生购买行为，浏览不太反应客户对商品的喜爱程度。



能不能不埋点，只用订单的购买行为去构建协同过滤矩阵？

1.埋点不仅仅是为了得到用户的行为特征，当我们进行推荐系统在线评价的时候也需要埋点。

2.只通过订单得到的购买行为比较单一，对用户的兴趣程度反应有限。

3.离线时通过业务数据库也可得到行为信息，但是实时或者近实时推荐，还是要通过埋点得到用户行为。



### 需求埋点日志数据

点击/浏览商品详情页 ：会员id，商品id，行为，页面来源，停留事件，时间戳。

收藏/点击收藏按钮：会员id，商品id，行为，时间戳。

加购/点击加购按钮：会员id，商品id，行为，时间戳。

购买/点击购买成功按钮：会员id，商品id，行为，页面来源，时间戳。